// @harness parser_roundtrip
// @harness typecheck_validation_succeeds
(mir
    (adt Point2
        (type_param T)
        (struct
            (field x T)
            (field y T)))
    (trait Default
        (assoc_func default
            (return_type Self)))
    (trait Add
        (type_param Rhs)
        (type_param Output assoc_type)
        (assoc_func add
            (param Self)
            (param Rhs)
            (return_type Output)))
    (trait_impl
        (trait Default)
        (type int)
        (assoc_func default int_default))
    (trait_impl
        (trait 
            (Add
                (type_arg Rhs int)
                (type_arg Output int)))
        (type int)
        (assoc_func add int_add))
    (trait_impl
        (type_param T
            (requires Default))
        (trait Default)
        (type
            (Point2
                (type_arg T T)))
        (assoc_func default 
            (point2_default
                (type_arg T T))))
    (func int_default
        (return_type int)
        (entry block0)
        (block block0
            (constant v0 (0))
            (return (v0))))
    (func int_add
        (return_type int)
        (entry block0)
        (block block0
            (param lhs int)
            (param rhs int)
            (int.add res (lhs rhs))
            (return (res))))
    (func point2_default
        (type_param T
            (requires Default))
        (return_type
            (Point2
                (type_arg T T)))
        (entry block0)
        (block block0
            (call x
                ((assoc_func T Default default) ()))
            (call y
                ((assoc_func T Default default) ()))
            (struct.init pt
                ((Point2 (type_arg T T))
                    (field x x)
                    (field y y)))
            (return (pt))))
    (func list_sum
        (type_param T
            (requires Default)
            (requires
                (Add
                    (type_arg Rhs T)
                    (type_arg Output T))))
        (return_type T)
        (entry block0)
        (block block0
            (param list (bufref T))
            (call accum
                ((assoc_func T Default default) ()))
            (constant i (0))
            (jump (loop ())))
        (block loop
            (bufref.len len (list))
            (int.cmp done (== i len))
            (branch
                (done
                    (true exit ())
                    (false loop_body ()))))
        (block loop_body
            (bufref.get element (list i))
            (call accum
                ((assoc_func T (Add (type_arg Rhs T) (type_arg Output T)) add)
                    (accum element)))
            (constant one (1))
            (int.add i (i one))
            (jump (loop ())))
        (block exit
            (return (accum)))))
    